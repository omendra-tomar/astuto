# OneLens Platform - Complete Architecture Analysis

**Project:** onelens-4786099461
**GitOps:** Enabled
**Multi-Cloud:** AWS (Primary) + GCP (Expansion)
**Architecture Style:** Event-Driven Microservices with Workflow Orchestration

---

## ðŸŒ MULTI-CLOUD DEPLOYMENT OVERVIEW

### Current Environment Status

| Environment | Cloud | Region | Status | Stream | Last Deploy | State |
|------------|-------|--------|--------|--------|-------------|-------|
| **prod** | AWS | (Primary) | âœ… RUNNING | PROD | 2025-12-16 09:00 | SUCCESS |
| **prod-gcp** | GCP | (Primary) | ðŸ”„ RUNNING | PROD | 2025-12-16 12:32 | IN_PROGRESS |
| **test-gcp** | GCP | (Primary) | âœ… RUNNING | DEV | 2025-12-16 12:27 | SUCCESS |
| **test** | AWS | (Primary) | âš ï¸ RUNNING | QA | 2025-11-26 12:26 | FAILED |
| **dev** | AWS | (Primary) | âŒ DESTROY_FAILED | DEV | 2025-08-26 11:26 | FAILED |
| **prod-us** | AWS | US Region | âŒ DESTROY_FAILED | PROD1 | 2025-08-29 07:04 | N/A |

### Cloud Distribution Strategy
- **AWS:** Primary production + legacy environments
- **GCP:** New production expansion + active development
- **Multi-region:** Attempted (prod-us failed)

---

## ðŸ—ï¸ COMPLETE ARCHITECTURE DIAGRAM

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              INTERNET / USERS                               â”‚
â”‚                         (Global Traffic Distribution)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   DNS & CDN LAYER       â”‚
                    â”‚   (Not in Facets)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                        â”‚                        â”‚
        â–¼                        â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AWS INGRESS     â”‚  â”‚   GCP INGRESS    â”‚  â”‚   INTERNAL       â”‚
â”‚                   â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚  ALB (public)     â”‚  â”‚  GCP ALB         â”‚  â”‚  NGINX (tools)   â”‚
â”‚  ALB (dagster)    â”‚  â”‚  (public-nlb)    â”‚  â”‚                  â”‚
â”‚  ALB (private-âŠ—)  â”‚  â”‚  (gcp-pub-âŠ—)     â”‚  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                     â”‚                     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    KUBERNETES ORCHESTRATION LAYER                         â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  CONTROL PLANE                                                  â”‚    â”‚
â”‚  â”‚  â”œâ”€ Cert Manager (TLS automation)                              â”‚    â”‚
â”‚  â”‚  â”œâ”€ ALB Controller (AWS ingress)                               â”‚    â”‚
â”‚  â”‚  â”œâ”€ Cluster Autoscaler (node scaling)                          â”‚    â”‚
â”‚  â”‚  â”œâ”€ VPA (vertical pod autoscaling)                             â”‚    â”‚
â”‚  â”‚  â”œâ”€ KEDA (event-driven autoscaling via SQS metrics)            â”‚    â”‚
â”‚  â”‚  â””â”€ EKS Addons (AWS-specific)                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  COMPUTE NODES (14 Node Pools)                                 â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  AWS EKS:                         GCP GKE:                     â”‚    â”‚
â”‚  â”‚  â”œâ”€ jobs-node (self-managed)      â”œâ”€ default-arm (âŠ—)          â”‚    â”‚
â”‚  â”‚  â”œâ”€ ol-medium (âŠ—)                 â”œâ”€ ol-arm-medium (âŠ—)        â”‚    â”‚
â”‚  â”‚  â”œâ”€ ol-large (âŠ—)                  â”œâ”€ ol-arm-mini (âŠ—)          â”‚    â”‚
â”‚  â”‚  â””â”€ manoj-to-delete (âŠ—)           â”œâ”€ ol-arm-small (âŠ—)         â”‚    â”‚
â”‚  â”‚                                    â”œâ”€ onyx-amd-np (âŠ—)          â”‚    â”‚
â”‚  â”‚  Node Fleet (Multi-cloud):        â”œâ”€ arm-node-1c (âŠ—)          â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-nodepool (âŠ—)             â”œâ”€ core-amd-np (âŠ—)          â”‚    â”‚
â”‚  â”‚  â””â”€ onyx-nodepool-gcp (âŠ—)         â”œâ”€ gcp-arm-based (âŠ—)        â”‚    â”‚
â”‚  â”‚                                    â””â”€ dagster-np (âŠ—)           â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  [âŠ— = Disabled]                                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚               â”‚               â”‚
                â–¼               â–¼               â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MICROSERVICES LAYER (56 Services)                   â”‚
â”‚                          Namespace: onyx                                 â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  AUTHENTICATION & AUTHORIZATION                                â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-authentication-api (Deployment)                       â”‚    â”‚
â”‚  â”‚  â”‚  â†’ PostgreSQL (Dagster DB)                                  â”‚    â”‚
â”‚  â”‚  â”‚  â†’ ConfigMap: onyx-authentication                           â”‚    â”‚
â”‚  â”‚  â”‚  â†’ IAM Role: onyx-role                                      â”‚    â”‚
â”‚  â”‚  â””â”€ DynamoDB: onyx-auth-sso-tenant-mapping-db                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  WORKFLOW ORCHESTRATION (Core Business Logic)                  â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  APIs:                                                          â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-workflow-mgmt-api                                     â”‚    â”‚
â”‚  â”‚  â”‚  â†’ ConfigMap: onyx-wf-mgmt                                  â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-workflow-actions-api                                  â”‚    â”‚
â”‚  â”‚  â”‚  â†’ ConfigMap: onyx-wf-actions                               â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  Background Jobs:                                               â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-workflow-execution-job                                â”‚    â”‚
â”‚  â”‚  â”‚  â†’ SQS: onyx-workflow-execution                             â”‚    â”‚
â”‚  â”‚  â”‚  â†’ ConfigMap: onyx-wf-execution                             â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-workflow-trigger-job                                  â”‚    â”‚
â”‚  â”‚  â”‚  â†’ SQS: onyx-workflow-trigger                               â”‚    â”‚
â”‚  â”‚  â””â”€ onyx-workflow-cron-job                                     â”‚    â”‚
â”‚  â”‚     â†’ SQS: onyx-workflow-cron                                  â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  Storage:                                                       â”‚    â”‚
â”‚  â”‚  â”œâ”€ S3: onyx-workflow (artifacts)                              â”‚    â”‚
â”‚  â”‚  â”œâ”€ DynamoDB: onyx-workflow-db                                 â”‚    â”‚
â”‚  â”‚  â”œâ”€ DynamoDB: onyx-workflow-execution-db                       â”‚    â”‚
â”‚  â”‚  â”œâ”€ DynamoDB: onyx-workflow-trigger-db                         â”‚    â”‚
â”‚  â”‚  â”œâ”€ DynamoDB: onyx-workflow-settings-db                        â”‚    â”‚
â”‚  â”‚  â”œâ”€ DynamoDB: onyx-workflow-audit-db                           â”‚    â”‚
â”‚  â”‚  â”œâ”€ DynamoDB: onyx-workflow-version-db                         â”‚    â”‚
â”‚  â”‚  â””â”€ DynamoDB: onyx-workflow-global-trigger-db                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  RUNBOOKS AUTOMATION                                           â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-runbooks-api                                          â”‚    â”‚
â”‚  â”‚  â”‚  â†’ ConfigMap: runbooks-api-config                           â”‚    â”‚
â”‚  â”‚  â””â”€ Storage:                                                    â”‚    â”‚
â”‚  â”‚     â”œâ”€ DynamoDB: onyx-global-runbooks-db                       â”‚    â”‚
â”‚  â”‚     â”œâ”€ DynamoDB: onyx-tenant-runbooks-db                       â”‚    â”‚
â”‚  â”‚     â”œâ”€ DynamoDB: onyx-tenant-runbook-execution-db              â”‚    â”‚
â”‚  â”‚     â”œâ”€ DynamoDB: onyx-tenant-runbook-audit-db                  â”‚    â”‚
â”‚  â”‚     â”œâ”€ DynamoDB: onyx-tenant-runbook-execution-counter-db      â”‚    â”‚
â”‚  â”‚     â”œâ”€ DynamoDB: onyx-tenant-runbook-account-mapping-db        â”‚    â”‚
â”‚  â”‚     â””â”€ DynamoDB: onyx-global-runbook-recommendation-db         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  INTEGRATIONS ENGINE                                           â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-integrations-api                                      â”‚    â”‚
â”‚  â”‚  â”‚  â†’ ConfigMap: onyx-integrations                             â”‚    â”‚
â”‚  â”‚  â””â”€ Storage:                                                    â”‚    â”‚
â”‚  â”‚     â”œâ”€ DynamoDB: onyx-global-integration-db                    â”‚    â”‚
â”‚  â”‚     â”œâ”€ DynamoDB: onyx-tenant-integration-db                    â”‚    â”‚
â”‚  â”‚     â”œâ”€ DynamoDB: onyx-tenant-integration-credentials-db        â”‚    â”‚
â”‚  â”‚     â”œâ”€ DynamoDB: onyx-tenant-integration-audit-db              â”‚    â”‚
â”‚  â”‚     â””â”€ DynamoDB: onyx-global-integration-action-config-db      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  REQUEST PROCESSING PIPELINE                                   â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-request-processor-api                                 â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-request-processor-job                                 â”‚    â”‚
â”‚  â”‚  â”‚  â†’ SQS: onyx-request-processor                              â”‚    â”‚
â”‚  â”‚  â”‚  â†’ ConfigMap: onyx-request-proc                             â”‚    â”‚
â”‚  â”‚  â””â”€ DynamoDB: onyx-request-db                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  DATA WAREHOUSE & ANALYTICS                                    â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-dataware-house-api                                    â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-dataware-house-api-temp                               â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-dataware-house-job                                    â”‚    â”‚
â”‚  â”‚  â”‚  â†’ ConfigMap: onyx-dwh                                      â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-dashboard-api                                         â”‚    â”‚
â”‚  â”‚  â”‚  â†’ ConfigMap: onyx-dashboard                                â”‚    â”‚
â”‚  â”‚  â””â”€ onyx-log-processor-job                                     â”‚    â”‚
â”‚  â”‚     â†’ SQS: onyx-log-processor                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  COST MANAGEMENT                                               â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-cost-center-api                                       â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-cost-center-job                                       â”‚    â”‚
â”‚  â”‚  â”‚  â†’ ConfigMap: onyx-cost-center                              â”‚    â”‚
â”‚  â”‚  â””â”€ Storage:                                                    â”‚    â”‚
â”‚  â”‚     â”œâ”€ S3: onelens-tenants-cur (Cost & Usage Reports)          â”‚    â”‚
â”‚  â”‚     â””â”€ SQS: onyx-cur-delta (âŠ—)                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  AI & INSIGHTS                                                 â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-ai-insights-api                                       â”‚    â”‚
â”‚  â”‚  â”œâ”€ onyx-scheduler-api                                         â”‚    â”‚
â”‚  â”‚  â”‚  â†’ ConfigMap: onyx-scheduler                                â”‚    â”‚
â”‚  â”‚  â””â”€ policy-master-tool                                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  CORE BACKEND                                                  â”‚    â”‚
â”‚  â”‚  â”œâ”€ onelens-backend (k8s flavor)                               â”‚    â”‚
â”‚  â”‚  â”œâ”€ data-harvest                                               â”‚    â”‚
â”‚  â”‚  â””â”€ Storage:                                                    â”‚    â”‚
â”‚  â”‚     â”œâ”€ S3: onyx-backend                                        â”‚    â”‚
â”‚  â”‚     â”œâ”€ S3: onelens-data                                        â”‚    â”‚
â”‚  â”‚     â”œâ”€ S3: onelens-downloads                                   â”‚    â”‚
â”‚  â”‚     â””â”€ DynamoDB: onyx-tenant-db                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  DISABLED / LEGACY SERVICES (12)                               â”‚    â”‚
â”‚  â”‚  â”œâ”€ tenant-management (âŠ—)                                      â”‚    â”‚
â”‚  â”‚  â”œâ”€ tenant-mgmt-svc (âŠ—)                                        â”‚    â”‚
â”‚  â”‚  â”œâ”€ onelens-be-preprod (âŠ—)                                     â”‚    â”‚
â”‚  â”‚  â”œâ”€ onelens-o11y (âŠ—)                                           â”‚    â”‚
â”‚  â”‚  â”œâ”€ onelens-alerts (cronjob, âŠ—)                                â”‚    â”‚
â”‚  â”‚  â”œâ”€ websearch (âŠ—)                                              â”‚    â”‚
â”‚  â”‚  â”œâ”€ ask-navira (âŠ—)                                             â”‚    â”‚
â”‚  â”‚  â”œâ”€ memgraph-db (âŠ—)                                            â”‚    â”‚
â”‚  â”‚  â”œâ”€ memgraph-lab (âŠ—)                                           â”‚    â”‚
â”‚  â”‚  â”œâ”€ cloudsql-auth-proxy (âŠ—)                                    â”‚    â”‚
â”‚  â”‚  â””â”€ ol-sch-handler (Lambda, âŠ—)                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MESSAGE LAYER   â”‚  â”‚  EVENT BRIDGE    â”‚  â”‚  STEP FUNCTIONS      â”‚
â”‚                  â”‚  â”‚                  â”‚  â”‚                      â”‚
â”‚  SQS (8):        â”‚  â”‚  EventBridge:    â”‚  â”‚  IAM Role:           â”‚
â”‚  â”œâ”€ workflow-    â”‚  â”‚  â””â”€ onyx-wf-     â”‚  â”‚  â””â”€ onyx-workflow-   â”‚
â”‚  â”‚   execution   â”‚  â”‚     execution    â”‚  â”‚     step-function-   â”‚
â”‚  â”œâ”€ workflow-    â”‚  â”‚                  â”‚  â”‚     role             â”‚
â”‚  â”‚   trigger     â”‚  â”‚  Flow:           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”œâ”€ workflow-    â”‚  â”‚  EventBridge     â”‚
â”‚  â”‚   cron        â”‚  â”‚    â†“             â”‚
â”‚  â”œâ”€ request-     â”‚  â”‚  SNS             â”‚
â”‚  â”‚   processor   â”‚  â”‚    â†“             â”‚
â”‚  â”œâ”€ log-         â”‚  â”‚  SQS             â”‚
â”‚  â”‚   processor   â”‚  â”‚    â†“             â”‚
â”‚  â”œâ”€ orchestrator â”‚  â”‚  Service Job     â”‚
â”‚  â”œâ”€ olscheduler  â”‚  â”‚                  â”‚
â”‚  â”‚   dlq         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â””â”€ workflow-dlq â”‚
â”‚                  â”‚
â”‚  SNS (3):        â”‚
â”‚  â”œâ”€ workflow-    â”‚
â”‚  â”‚   execution   â”‚
â”‚  â”œâ”€ workflow-    â”‚
â”‚  â”‚   trigger     â”‚
â”‚  â””â”€ notification â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  IAM & AUTHN  â”‚
                â”‚               â”‚
                â”‚  Roles:       â”‚
                â”‚  â”œâ”€ onyx-role â”‚
                â”‚  â”œâ”€ keda-role â”‚
                â”‚  â”œâ”€ full-svc  â”‚
                â”‚  â””â”€ lambda    â”‚
                â”‚               â”‚
                â”‚  Policies:    â”‚
                â”‚  â”œâ”€ onyx-     â”‚
                â”‚  â”‚   perms    â”‚
                â”‚  â””â”€ full-svc  â”‚
                â”‚               â”‚
                â”‚  Cognito:     â”‚
                â”‚  â””â”€ dagster-  â”‚
                â”‚     access    â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                               â”‚
        â–¼                                               â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATA PLATFORM          â”‚                â”‚  STORAGE LAYER           â”‚
â”‚  (Dagster)              â”‚                â”‚                          â”‚
â”‚                         â”‚                â”‚  S3 Buckets (7):         â”‚
â”‚  Helm Charts:           â”‚                â”‚  â”œâ”€ onyx-workflow        â”‚
â”‚  â”œâ”€ dagster-webserver   â”‚                â”‚  â”œâ”€ onyx-backend         â”‚
â”‚  â”‚  â†’ Ingress: dagster  â”‚                â”‚  â”œâ”€ onelens-data         â”‚
â”‚  â”‚  â†’ Cognito OIDC      â”‚                â”‚  â”œâ”€ onelens-downloads    â”‚
â”‚  â””â”€ dagster-daemon      â”‚                â”‚  â”œâ”€ onelens-tenants-cur  â”‚
â”‚                         â”‚                â”‚  â”œâ”€ loki-s3              â”‚
â”‚  Database:              â”‚                â”‚  â””â”€ kubernetes-s3-bucket â”‚
â”‚  â””â”€ postgres/dagster-db â”‚                â”‚                          â”‚
â”‚     (RDS)               â”‚                â”‚  EFS:                    â”‚
â”‚                         â”‚                â”‚  â””â”€ dagster-efs          â”‚
â”‚  Storage:               â”‚                â”‚     (Persistent vol)     â”‚
â”‚  â””â”€ aws_efs/dagster-efs â”‚                â”‚                          â”‚
â”‚                         â”‚                â”‚  KMS:                    â”‚
â”‚  K8s Resources:         â”‚                â”‚  â””â”€ onelens-key          â”‚
â”‚  â”œâ”€ efs-sc-2 (âŠ—)        â”‚                â”‚     (Encryption)         â”‚
â”‚  â”œâ”€ dagster-daemon-pvc  â”‚                â”‚                          â”‚
â”‚  â”‚  (âŠ—)                 â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â””â”€ dagster-web-pvc(âŠ—)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE LAYER (26 Databases)                    â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  DYNAMODB TABLES (25) - NoSQL, Multi-tenant                 â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  Workflow Domain (8):                                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-workflow-db                                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-workflow-execution-db                              â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-workflow-trigger-db                                â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-workflow-settings-db                               â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-workflow-audit-db                                  â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-workflow-version-db                                â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-workflow-global-trigger-db                         â”‚ â”‚
â”‚  â”‚  â””â”€ onyx-request-db                                         â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  Runbooks Domain (6):                                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-global-runbooks-db                                 â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-tenant-runbooks-db                                 â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-tenant-runbook-execution-db                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-tenant-runbook-audit-db                            â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-tenant-runbook-execution-counter-db                â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-tenant-runbook-account-mapping-db                  â”‚ â”‚
â”‚  â”‚  â””â”€ onyx-global-runbook-recommendation-db                   â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  Integrations Domain (5):                                    â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-global-integration-db                              â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-tenant-integration-db                              â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-tenant-integration-credentials-db                  â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-tenant-integration-audit-db                        â”‚ â”‚
â”‚  â”‚  â””â”€ onyx-global-integration-action-config-db                â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  Tenant & Auth Domain (3):                                   â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-tenant-db                                          â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-auth-sso-tenant-mapping-db                         â”‚ â”‚
â”‚  â”‚  â””â”€ onyx-notification-rate-limit-db                         â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  Flavor: astuto-dynamodb (Custom)                           â”‚ â”‚
â”‚  â”‚  Version: 0.1                                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  POSTGRESQL (1) - Relational                                â”‚ â”‚
â”‚  â”‚  â””â”€ dagster-db (RDS)                                        â”‚ â”‚
â”‚  â”‚     Purpose: Dagster metadata & job orchestration           â”‚ â”‚
â”‚  â”‚     Flavor: rds, Version: 0.1                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  OPENSEARCH (1) - Search & Analytics                        â”‚ â”‚
â”‚  â”‚  â””â”€ logs (OpenSearch)                                       â”‚ â”‚
â”‚  â”‚     Purpose: Advanced log search & analytics                â”‚ â”‚
â”‚  â”‚     Flavor: opensearch, Version: 0.2                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 OBSERVABILITY & MONITORING STACK                    â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  METRICS (Prometheus)                                        â”‚ â”‚
â”‚  â”‚  â””â”€ kubernetes_monitoring/default                           â”‚ â”‚
â”‚  â”‚     Configuration: prometheus                               â”‚ â”‚
â”‚  â”‚     Scrapes: Pods, Nodes, Services                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  LOGS (Loki)                                                 â”‚ â”‚
â”‚  â”‚  â”œâ”€ log_collector/loki-s3                                   â”‚ â”‚
â”‚  â”‚  â”‚  Flavor: loki_aws_s3                                     â”‚ â”‚
â”‚  â”‚  â”‚  Backend: S3 (loki-s3 bucket)                            â”‚ â”‚
â”‚  â”‚  â””â”€ loki_alerting_rules/onyx-error-alerts                   â”‚ â”‚
â”‚  â”‚     Alerts on: Errors, Exceptions, Critical logs            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  VISUALIZATION (Grafana Dashboards - 16)                    â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  Application:                    Infrastructure:            â”‚ â”‚
â”‚  â”‚  â”œâ”€ application-dashboard        â”œâ”€ node-summary           â”‚ â”‚
â”‚  â”‚  â”œâ”€ application-resource-summary â”œâ”€ node-resources          â”‚ â”‚
â”‚  â”‚  â”œâ”€ app-usage-summary            â”œâ”€ vm-metrics             â”‚ â”‚
â”‚  â”‚  â””â”€ status-checks                â”œâ”€ unattached-volumes     â”‚ â”‚
â”‚  â”‚                                  â””â”€ ingress-overview        â”‚ â”‚
â”‚  â”‚  Logs:                           Services:                  â”‚ â”‚
â”‚  â”‚  â”œâ”€ onyx-all-logs                â”œâ”€ kafka-dashboard        â”‚ â”‚
â”‚  â”‚  â”œâ”€ quick-log-search             â”œâ”€ redis-dashboard        â”‚ â”‚
â”‚  â”‚  â””â”€ loki                          â”œâ”€ postgres-dashboard     â”‚ â”‚
â”‚  â”‚                                  â””â”€ mysql-dashboard (âŠ—)     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ALTERNATIVE MONITORING (Disabled)                           â”‚ â”‚
â”‚  â”‚  â”œâ”€ victoria-metrics (Helm, âŠ—)                              â”‚ â”‚
â”‚  â”‚  â”œâ”€ vict-metric-agent (Helm, âŠ—)                             â”‚ â”‚
â”‚  â”‚  â””â”€ fluentbit (Helm, âŠ—)                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     INFRASTRUCTURE COMPONENTS                        â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  NETWORKING                                                  â”‚ â”‚
â”‚  â”‚  â””â”€ network/default                                         â”‚ â”‚
â”‚  â”‚     VPC, Subnets, Security Groups, NAT                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  KUBERNETES CLUSTER                                          â”‚ â”‚
â”‚  â”‚  â””â”€ kubernetes_cluster/default                              â”‚ â”‚
â”‚  â”‚     Multi-cloud: EKS (AWS) + GKE (GCP)                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  K8S INFRASTRUCTURE RESOURCES                                â”‚ â”‚
â”‚  â”‚  â”œâ”€ public-nlb-backend-config                               â”‚ â”‚
â”‚  â”‚  â”œâ”€ ecs-task-exec-sa (âŠ—)                                    â”‚ â”‚
â”‚  â”‚  â”œâ”€ efs-sc-2 (âŠ—)                                            â”‚ â”‚
â”‚  â”‚  â”œâ”€ dagster-daemon-pvc (âŠ—)                                  â”‚ â”‚
â”‚  â”‚  â””â”€ dagster-web-pvc (âŠ—)                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ADDITIONAL COMPONENTS                                       â”‚ â”‚
â”‚  â”‚  â”œâ”€ Helm: k8s-dashboard-new                                 â”‚ â”‚
â”‚  â”‚  â”œâ”€ GCS: tenant-cur (âŠ—), loki-gcs (âŠ—)                      â”‚ â”‚
â”‚  â”‚  â””â”€ Amplify: onelens-platform (Frontend, âŠ—)                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ DATA FLOW PATTERNS

### 1. Request Processing Flow
```
User Request
  â†’ Ingress (ALB/GCP ALB)
  â†’ onyx-*-api (Service)
  â†’ DynamoDB (State)
  â†’ SQS (Async processing)
  â†’ onyx-*-job (Background processor)
  â†’ S3 (Results/Artifacts)
```

### 2. Workflow Execution Flow
```
Workflow Trigger
  â†’ aws_eventbridge/onyx-workflow-execution
  â†’ sns/onyx-workflow-execution
  â†’ sqs/onyx-workflow-execution
  â†’ service/onyx-workflow-execution-job
  â†’ Step Functions (Orchestration)
  â†’ Multiple service invocations
  â†’ DynamoDB (State tracking)
  â†’ S3 (Artifacts)
```

### 3. Cost Processing Flow
```
AWS CUR Reports â†’ S3/onelens-tenants-cur
  â†’ SQS/onyx-cur-delta (âŠ— currently disabled)
  â†’ onyx-cost-center-job
  â†’ DynamoDB (Cost data)
  â†’ onyx-cost-center-api (Query)
  â†’ onyx-dashboard-api (Visualization)
```

### 4. Data Pipeline Flow
```
Data Sources
  â†’ service/data-harvest
  â†’ PostgreSQL/dagster-db (Metadata)
  â†’ helm/dagster-daemon (Orchestration)
  â†’ Jobs execution on K8s
  â†’ EFS/dagster-efs (Temp storage)
  â†’ S3/onelens-data (Final storage)
  â†’ onyx-dataware-house-api (Access)
```

### 5. Log Collection Flow
```
Services â†’ stdout/stderr
  â†’ Loki collector
  â†’ S3/loki-s3 (Long-term storage)
  â†’ Grafana (Query & visualization)
  â†’ OpenSearch/logs (Advanced search)
```

### 6. Authentication Flow
```
User Login
  â†’ onyx-authentication-api
  â†’ DynamoDB/onyx-auth-sso-tenant-mapping-db
  â†’ PostgreSQL/dagster-db (User metadata)
  â†’ JWT/Session token
  â†’ Subsequent API calls with token
```

---

## ðŸ“Š RESOURCE STATISTICS

### Active Resources: 149
- Services: 44 (12 disabled)
- DynamoDB Tables: 25
- SQS Queues: 7 (1 disabled)
- S3 Buckets: 7
- SNS Topics: 3
- Node Pools: 1 active (13 disabled)
- ConfigMaps: 12 (1 disabled)
- Ingress: 3 active (4 disabled)
- Grafana Dashboards: 15 (1 disabled)
- Helm Charts: 3 (3 disabled)
- IAM Roles: 5
- IAM Policies: 3
- K8s Resources: 1 active (4 disabled)
- Configurations: 7 (1 disabled)
- Others: 8

### Infrastructure Footprint
- **Total Resources Defined:** 149
- **Active Resources:** ~100
- **Disabled/Legacy:** ~49
- **Multi-cloud:** AWS (primary) + GCP (expansion)

---

## ðŸ” SECURITY ARCHITECTURE

### IAM & Access Control
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IAM Roles for Service Accounts â”‚
â”‚  (IRSA - AWS)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  onyx-role                      â”‚
â”‚  â”œâ”€ Attached to: All onyx-* svc â”‚
â”‚  â”œâ”€ Policies:                   â”‚
â”‚  â”‚  â”œâ”€ onyx-permissions         â”‚
â”‚  â”‚  â””â”€ CloudWatchLogsFullAccess â”‚
â”‚  â””â”€ Outputs: irsa_iam_role_arn  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  keda-role                      â”‚
â”‚  â””â”€ Used by: KEDA autoscaler    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ol-sch-handler                 â”‚
â”‚  â””â”€ Used by: Lambda (âŠ—)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  onyx-workflow-step-function    â”‚
â”‚  â””â”€ Used by: Step Functions     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Secret Management
- **Blueprint Secrets:** Stored in Facets encrypted vault
- **Usage:** `${blueprint.self.secrets.SECRET_NAME}`
- **Examples:**
  - AUTH_API_KEY
  - ONYX_API_TOKEN
  - OL_TOKEN
  - EXTERNAL_PROVIDER_API_TOKEN
  - POSTGRES credentials (auto-injected)

### Encryption
- **KMS:** onelens-key (AWS KMS)
- **At Rest:** DynamoDB, S3, EFS, RDS
- **In Transit:** TLS via Cert Manager

### Network Security
- **VPC Isolation:** network/default
- **Security Groups:** Via IAM policies
- **Private Subnets:** For databases and internal services
- **Public Ingress:** ALB with WAF (assumed)

### Audit Trail
```
DynamoDB Audit Tables:
â”œâ”€ onyx-tenant-runbook-audit-db
â”œâ”€ onyx-tenant-integration-audit-db
â””â”€ onyx-workflow-audit-db

Log Aggregation:
â”œâ”€ Loki (All service logs)
â””â”€ OpenSearch (Searchable logs)
```

---

## ðŸš€ AUTOSCALING STRATEGY

### Pod-Level Autoscaling
1. **HPA (Horizontal Pod Autoscaler)**
   - Per-service configuration
   - Metrics: CPU, Memory
   - Example: `min: 1, max: 1` (most services)

2. **VPA (Vertical Pod Autoscaler)**
   - Configuration: configuration/vpa
   - Adjusts CPU/Memory requests
   - Mode: Recommendation or Auto

3. **KEDA (Event-Driven Autoscaler)**
   - Configuration: configuration/keda
   - Triggers: SQS queue depth
   - Scale services based on message backlog
   - IAM Role: keda-role

### Node-Level Autoscaling
- **Cluster Autoscaler**
  - Configuration: configuration/cluster-autoscalar
  - Scales node pools based on pod demand
  - Works with: jobs-node (active)

### Current Scaling Posture
- **Most services:** Fixed 1 replica (min: 1, max: 1)
- **Indicates:** Under-optimized for burst traffic
- **Opportunity:** Enable dynamic scaling

---

## ðŸŽ¯ ARCHITECTURE PATTERNS IDENTIFIED

### 1. Domain-Driven Design (DDD)
- **Bounded Contexts:**
  - Workflow domain
  - Runbooks domain
  - Integrations domain
  - Authentication domain
  - Cost management domain

### 2. Event-Driven Architecture (EDA)
- **Event Sources:** EventBridge, SNS, SQS
- **Consumers:** Background job services
- **Pattern:** Pub/Sub, Queue-based

### 3. CQRS (Command Query Responsibility Segregation)
- **Write APIs:** onyx-*-api (transactional)
- **Read APIs:** onyx-dashboard-api, onyx-dataware-house-api
- **Storage:** DynamoDB (writes), DWH (reads)

### 4. Microservices with Shared Data
- **Anti-pattern detected:** Multiple services â†’ Same DynamoDB tables
- **Risk:** Tight coupling via shared data stores

### 5. Strangler Fig Pattern (Legacy Migration)
- **Evidence:** 12 disabled services
- **Suggests:** Gradual migration from old to new architecture

### 6. Multi-Tenancy via Partition Keys
- **Pattern:** tenant-* DynamoDB tables
- **Isolation:** Logical (not physical)

### 7. Polyglot Persistence
- **DynamoDB:** Transactional data (NoSQL)
- **PostgreSQL:** Dagster metadata (Relational)
- **S3:** Object storage
- **OpenSearch:** Full-text search

---

## âš ï¸ ARCHITECTURE CONCERNS & TECHNICAL DEBT

### 1. Node Pool Sprawl
- **14 node pools defined, only 1 active**
- **Impact:** Configuration sprawl, maintenance burden
- **Recommendation:** Consolidate to 3-4 pools

### 2. Fixed Scaling (No Auto-scaling)
- **Most services:** `min: 1, max: 1`
- **Impact:** Cannot handle burst traffic
- **Risk:** Service degradation under load

### 3. Disabled Resources (49 total)
- **12 services, 13 node pools, 4 ingresses, etc.**
- **Impact:** Configuration clutter, unclear intent
- **Action needed:** Delete or document retention reason

### 4. Health Checks Disabled
- **Example:** `liveness_check_type: "None"`
- **Risk:** Kubernetes cannot auto-recover failed pods
- **Impact:** Increased MTTR (Mean Time To Recovery)

### 5. Shared IAM Role (onyx-role)
- **All services share one IAM role**
- **Risk:** Violation of least privilege principle
- **Impact:** Lateral movement risk if compromised

### 6. No CDN Detected
- **Static assets served directly from services**
- **Impact:** Higher latency, bandwidth costs

### 7. Failed Environments (dev, test, prod-us)
- **3 environments in FAILED/DESTROY_FAILED state**
- **Action:** Investigate and clean up or restore

### 8. No API Gateway Detected
- **Direct service exposure via ALB**
- **Missing:** Rate limiting, throttling, API versioning

### 9. Single Database for Multi-Service (Dagster)
- **onyx-authentication-api â†’ dagster-db**
- **Concern:** Wrong use of Dagster DB for app data

### 10. Missing Disaster Recovery Configuration
- **No backup policies visible in resource definitions**
- **Risk:** Data loss in failure scenarios

---

## ðŸ“ˆ NEXT MILESTONES FOR ONELENS

### ðŸŽ¯ PHASE 1: Operational Excellence (1-2 Months)

#### Milestone 1.1: Resource Hygiene
**Priority:** HIGH | **Effort:** Medium | **Impact:** High

**Tasks:**
1. **Audit & Remove Disabled Resources**
   - Delete 12 disabled services
   - Remove 13 disabled node pools
   - Clean up 4 disabled ingresses
   - Remove disabled Helm charts
   - **Expected:** -30% configuration complexity

2. **Resolve Failed Environments**
   - Investigate dev (DESTROY_FAILED since Aug 2025)
   - Fix test (FAILED since Nov 2025)
   - Decide on prod-us (destroy or restore)
   - **Expected:** Clean environment inventory

3. **Enable Health Checks**
   - Add liveness probes to all services
   - Add readiness probes to all services
   - Configure appropriate timeouts
   - **Expected:** Self-healing pods, reduced MTTR

**Deliverables:**
- Clean resource inventory (remove 49 disabled resources)
- All environments in RUNNING or deliberately DESTROYED
- 100% health check coverage

---

#### Milestone 1.2: Autoscaling Implementation
**Priority:** HIGH | **Effort:** Medium | **Impact:** High

**Tasks:**
1. **Enable HPA for Traffic-Facing Services**
   ```yaml
   High Priority Services:
   â”œâ”€ onyx-authentication-api (min: 2, max: 10)
   â”œâ”€ onyx-workflow-mgmt-api (min: 2, max: 8)
   â”œâ”€ onyx-integrations-api (min: 2, max: 8)
   â”œâ”€ onyx-runbooks-api (min: 2, max: 8)
   â”œâ”€ onyx-dashboard-api (min: 2, max: 6)
   â””â”€ onelens-backend (min: 3, max: 15)
   ```

2. **Configure KEDA for Job Services**
   ```yaml
   SQS Queue-Driven Scaling:
   â”œâ”€ onyx-workflow-execution-job
   â”‚  Trigger: sqs/onyx-workflow-execution depth > 10
   â”œâ”€ onyx-request-processor-job
   â”‚  Trigger: sqs/onyx-request-processor depth > 20
   â””â”€ onyx-log-processor-job
      Trigger: sqs/onyx-log-processor depth > 50
   ```

3. **Optimize Node Pool Configuration**
   ```
   Target State:
   â”œâ”€ api-pool (t3.large, 2-10 nodes, for APIs)
   â”œâ”€ jobs-pool (c5.xlarge, 1-8 nodes, for background jobs)
   â””â”€ data-pool (m5.2xlarge, 1-4 nodes, for Dagster)
   ```

**Deliverables:**
- 80% of services with dynamic scaling
- KEDA scaling policies for all job services
- Consolidated node pools (14 â†’ 3)

---

#### Milestone 1.3: Observability Enhancement
**Priority:** MEDIUM | **Effort:** Low | **Impact:** High

**Tasks:**
1. **Implement Distributed Tracing**
   - Deploy OpenTelemetry collector
   - Instrument top 10 services
   - Send traces to Grafana Tempo or AWS X-Ray

2. **Create Operational Dashboards**
   ```
   New Dashboards:
   â”œâ”€ Service Health (RED metrics: Rate, Errors, Duration)
   â”œâ”€ Cost Attribution (per service, per tenant)
   â”œâ”€ Workflow SLA Tracking
   â””â”€ Queue Backlog Monitoring
   ```

3. **Alert Refinement**
   - Define SLIs/SLOs for critical services
   - Create alerting rules in Loki
   - Integrate with SNS/onyx-notification

**Deliverables:**
- End-to-end request tracing
- 4 new operational dashboards
- SLO-based alerting for top 10 services

---

### ðŸŽ¯ PHASE 2: Security & Resilience (2-3 Months)

#### Milestone 2.1: Zero Trust Security Model
**Priority:** HIGH | **Effort:** High | **Impact:** Critical

**Tasks:**
1. **Implement Least Privilege IAM**
   ```
   Current: All services â†’ onyx-role (shared)
   Target: Per-service IAM roles

   Example:
   â”œâ”€ onyx-workflow-mgmt-api-role
   â”‚  Permissions: DynamoDB (workflow tables), SQS (workflow queues)
   â”œâ”€ onyx-authentication-api-role
   â”‚  Permissions: DynamoDB (auth table), RDS (dagster-db)
   â””â”€ onyx-cost-center-job-role
      Permissions: S3 (CUR bucket), DynamoDB (tenant table)
   ```

2. **Enable Service Mesh (Istio/Linkerd)**
   - mTLS between services
   - Fine-grained traffic policies
   - Zero-trust networking

3. **Secret Rotation Automation**
   - Integrate AWS Secrets Manager
   - Auto-rotate database credentials
   - Update blueprint secrets programmatically

4. **Network Segmentation**
   - Create namespace isolation (onyx, dagster, monitoring)
   - Implement Network Policies
   - Private link for RDS/DynamoDB

**Deliverables:**
- Per-service IAM roles (44 services)
- Service mesh deployed
- Automated secret rotation
- Network policies enforced

---

#### Milestone 2.2: Disaster Recovery & Business Continuity
**Priority:** HIGH | **Effort:** High | **Impact:** Critical

**Tasks:**
1. **Implement Backup Strategy**
   ```
   DynamoDB:
   â”œâ”€ Point-in-Time Recovery (PITR) enabled
   â””â”€ Daily snapshots to S3 (cross-region)

   RDS (dagster-db):
   â”œâ”€ Automated backups (7-day retention)
   â””â”€ Read replicas in secondary region

   S3:
   â”œâ”€ Versioning enabled (all buckets)
   â””â”€ Cross-region replication (critical buckets)
   ```

2. **Define RTO/RPO Targets**
   ```
   Tier 1 (Critical):
   â”œâ”€ onyx-authentication-api: RTO 15min, RPO 5min
   â”œâ”€ onyx-workflow-mgmt-api: RTO 30min, RPO 15min
   â””â”€ onyx-integrations-api: RTO 30min, RPO 15min

   Tier 2 (Important):
   â”œâ”€ onyx-dashboard-api: RTO 1hr, RPO 1hr
   â””â”€ onyx-dataware-house-api: RTO 2hr, RPO 4hr
   ```

3. **Multi-Region Active-Active (AWS)**
   ```
   Current: Single region (AWS primary)
   Target:  AWS us-east-1 (primary) + us-west-2 (secondary)

   Components:
   â”œâ”€ Route53 health checks + failover routing
   â”œâ”€ EKS in both regions
   â”œâ”€ DynamoDB Global Tables
   â””â”€ S3 cross-region replication
   ```

4. **Chaos Engineering**
   - Deploy AWS Fault Injection Simulator
   - Run monthly game days (pod failures, AZ failures)
   - Document runbooks for common failures

**Deliverables:**
- Comprehensive backup strategy (RTO/RPO documented)
- Multi-region deployment (AWS)
- Chaos engineering framework
- Disaster recovery runbooks

---

#### Milestone 2.3: Compliance & Audit
**Priority:** MEDIUM | **Effort:** Medium | **Impact:** High

**Tasks:**
1. **Implement Audit Logging**
   - Enable CloudTrail (AWS) / Cloud Audit Logs (GCP)
   - Log all IAM actions, API calls
   - Centralize in S3 with lifecycle policies

2. **Encryption Hardening**
   - Enforce TLS 1.3 minimum
   - Enable KMS encryption for all DynamoDB tables
   - S3 bucket encryption enforcement

3. **Vulnerability Scanning**
   - Deploy AWS Inspector / GCP Security Command Center
   - Scan container images in CI/CD
   - Monthly penetration testing

**Deliverables:**
- Centralized audit log repository
- 100% encryption coverage
- Automated vulnerability scanning

---

### ðŸŽ¯ PHASE 3: Performance & Cost Optimization (3-4 Months)

#### Milestone 3.1: Cost Optimization
**Priority:** MEDIUM | **Effort:** Medium | **Impact:** High

**Tasks:**
1. **Right-Size Resources**
   ```
   Current Issues:
   â”œâ”€ Most services: cpu_limit: 1500m (over-provisioned)
   â”œâ”€ memory_limit: 5Gi (rarely used)
   â””â”€ Fixed replicas (no scale-down)

   Actions:
   â”œâ”€ Analyze actual usage via VPA recommendations
   â”œâ”€ Reduce limits by 30-50%
   â””â”€ Enable scale-to-zero for low-traffic services
   ```

2. **Implement FinOps Practices**
   - Tag all resources (team, environment, cost-center)
   - Enable AWS Cost Anomaly Detection
   - Create cost allocation dashboards
   - Set budget alerts per environment

3. **Storage Optimization**
   ```
   S3:
   â”œâ”€ Enable Intelligent-Tiering
   â”œâ”€ Lifecycle policies (delete old logs after 90 days)
   â””â”€ Compress Loki logs

   DynamoDB:
   â”œâ”€ Evaluate on-demand vs provisioned pricing
   â””â”€ Archive cold data to S3 (via DynamoDB Streams)
   ```

4. **Reserved Capacity**
   - Purchase RDS Reserved Instances (dagster-db)
   - Commit to Compute Savings Plans (EKS nodes)
   - **Expected:** 30-40% cost reduction

**Deliverables:**
- 25% infrastructure cost reduction
- Full resource tagging
- FinOps dashboard with per-service costs

---

#### Milestone 3.2: Performance Optimization
**Priority:** MEDIUM | **Effort:** High | **Impact:** High

**Tasks:**
1. **API Performance Tuning**
   ```
   High-Priority APIs:
   â”œâ”€ onyx-authentication-api
   â”‚  Target: p95 latency < 100ms
   â”œâ”€ onyx-workflow-mgmt-api
   â”‚  Target: p95 latency < 200ms
   â””â”€ onyx-dashboard-api
      Target: p95 latency < 500ms

   Actions:
   â”œâ”€ Add Redis cache layer (ElastiCache)
   â”œâ”€ Implement response caching
   â”œâ”€ Optimize DynamoDB queries (secondary indexes)
   â””â”€ Connection pooling for PostgreSQL
   ```

2. **Database Optimization**
   ```
   DynamoDB:
   â”œâ”€ Create GSIs (Global Secondary Indexes) for common queries
   â”œâ”€ Use batch operations where possible
   â””â”€ Implement DynamoDB Accelerator (DAX) for hot data

   PostgreSQL:
   â”œâ”€ Add read replicas (offload analytics queries)
   â”œâ”€ Optimize Dagster metadata queries
   â””â”€ Implement connection pooling (PgBouncer)
   ```

3. **Content Delivery Optimization**
   - Deploy CloudFront (AWS) / Cloud CDN (GCP)
   - Cache static assets at edge
   - Implement image optimization pipeline
   - **Expected:** 50% reduction in origin traffic

4. **Async Processing Optimization**
   ```
   SQS Queue Tuning:
   â”œâ”€ Increase batch size for job processors
   â”œâ”€ Use SQS Long Polling (reduce empty receives)
   â””â”€ Implement dead-letter queue processing
   ```

**Deliverables:**
- 50% improvement in API latency (p95)
- CDN deployed with 80% cache hit rate
- Redis cache layer for hot data
- Optimized database queries

---

#### Milestone 3.3: Multi-Cloud Strategy Refinement
**Priority:** MEDIUM | **Effort:** High | **Impact:** Strategic

**Tasks:**
1. **GCP Production Stabilization**
   ```
   Current State:
   â”œâ”€ prod-gcp: IN_PROGRESS deployment
   â”œâ”€ test-gcp: SUCCESS
   â””â”€ Many GCP node pools disabled

   Actions:
   â”œâ”€ Complete prod-gcp deployment
   â”œâ”€ Enable GCP-specific resources (GCS, GCP ALB)
   â”œâ”€ Validate feature parity with AWS prod
   â””â”€ Conduct load testing
   ```

2. **Cloud-Agnostic Abstractions**
   ```
   Abstract:
   â”œâ”€ Object Storage (S3 â†” GCS)
   â”œâ”€ Queue Service (SQS â†” Pub/Sub)
   â”œâ”€ NoSQL (DynamoDB â†” Firestore/Bigtable)
   â””â”€ Load Balancer (ALB â†” GCP ALB)

   Implementation:
   â””â”€ Use Terraform modules with provider flexibility
   ```

3. **Cross-Cloud Data Replication**
   - Replicate critical S3 buckets to GCS
   - DynamoDB Global Tables (if staying AWS-centric)
   - Or migrate to cloud-agnostic DB (CockroachDB, MongoDB Atlas)

4. **Cost Comparison Analysis**
   - Run parallel workloads on AWS and GCP
   - Compare costs for equivalent workloads
   - Decide primary cloud based on TCO

**Deliverables:**
- GCP production environment fully operational
- Cloud-agnostic resource abstractions
- Multi-cloud cost analysis report
- Strategic cloud decision (AWS-primary vs multi-cloud)

---

### ðŸŽ¯ PHASE 4: Platform Modernization (4-6 Months)

#### Milestone 4.1: API Gateway Implementation
**Priority:** HIGH | **Effort:** Medium | **Impact:** High

**Tasks:**
1. **Deploy API Gateway**
   ```
   AWS: Amazon API Gateway (REST + HTTP APIs)
   GCP: Cloud API Gateway / Apigee

   Features:
   â”œâ”€ Centralized authentication
   â”œâ”€ Rate limiting (per tenant, per API key)
   â”œâ”€ Request/response transformation
   â”œâ”€ API versioning
   â””â”€ Developer portal
   ```

2. **Migrate Services Behind Gateway**
   ```
   Phase 1 (External APIs):
   â”œâ”€ onyx-authentication-api
   â”œâ”€ onyx-workflow-mgmt-api
   â”œâ”€ onyx-integrations-api
   â””â”€ onyx-dashboard-api

   Phase 2 (Internal APIs):
   â””â”€ Keep behind NGINX ingress (tools)
   ```

3. **Implement API Security**
   - OAuth 2.0 / OpenID Connect
   - API key management
   - JWT validation at gateway
   - WAF integration (block malicious requests)

**Deliverables:**
- API Gateway deployed
- Top 10 external APIs migrated
- Rate limiting policies enforced
- Developer documentation published

---

#### Milestone 4.2: Data Platform Enhancement
**Priority:** MEDIUM | **Effort:** High | **Impact:** Medium

**Tasks:**
1. **Upgrade Dagster Infrastructure**
   ```
   Current:
   â”œâ”€ Single PostgreSQL instance
   â””â”€ EFS for shared storage

   Target:
   â”œâ”€ PostgreSQL with read replicas
   â”œâ”€ S3 for intermediate data (replace EFS)
   â”œâ”€ Dagster Cloud (consider managed service)
   â””â”€ Separate Dagster environment from app workloads
   ```

2. **Implement Data Lake**
   ```
   Architecture:
   â”œâ”€ Raw Layer: S3/onelens-data (Parquet format)
   â”œâ”€ Curated Layer: DynamoDB â†’ S3 export (daily)
   â”œâ”€ Analytics Layer: Athena / BigQuery queries
   â””â”€ Governance: AWS Glue Data Catalog / GCP Dataplex
   ```

3. **Real-Time Analytics**
   - Stream DynamoDB changes to Kinesis/Pub/Sub
   - Real-time aggregations in Flink/Dataflow
   - Power live dashboards

**Deliverables:**
- Scalable Dagster infrastructure
- Data lake with 3-tier architecture
- Real-time analytics pipeline

---

#### Milestone 4.3: AI/ML Platform
**Priority:** LOW | **Effort:** High | **Impact:** Strategic

**Tasks:**
1. **ML Infrastructure**
   ```
   Components:
   â”œâ”€ Feature Store (Feast or AWS Feature Store)
   â”œâ”€ Model Training (SageMaker / Vertex AI)
   â”œâ”€ Model Registry (MLflow)
   â””â”€ Inference Endpoints (SageMaker / Vertex AI)
   ```

2. **AI-Powered Features**
   ```
   Use Cases:
   â”œâ”€ onyx-ai-insights-api â†’ Predictive anomaly detection
   â”œâ”€ policy-master-tool â†’ Auto-generate IAM policies
   â”œâ”€ onyx-runbooks-api â†’ Auto-suggest runbooks
   â””â”€ Cost optimization â†’ Predict usage spikes
   ```

3. **LLM Integration**
   - Deploy vector database (Pinecone, Weaviate)
   - Embed technical documentation
   - Build internal "OneLens Copilot" chatbot

**Deliverables:**
- ML platform operational
- 2-3 AI-powered features in production
- Internal LLM copilot for documentation

---

### ðŸŽ¯ PHASE 5: Advanced Capabilities (6+ Months)

#### Milestone 5.1: Global Multi-Region Architecture
**Priority:** STRATEGIC | **Effort:** Very High | **Impact:** Critical

**Tasks:**
1. **Active-Active Multi-Region**
   ```
   Regions:
   â”œâ”€ AWS: us-east-1, us-west-2, eu-west-1
   â”œâ”€ GCP: us-central1, europe-west1
   â””â”€ Latency-based routing via Route53/Cloud DNS
   ```

2. **Data Replication Strategy**
   - DynamoDB Global Tables (multi-region writes)
   - S3 bi-directional replication
   - PostgreSQL logical replication (multi-master)

3. **Global Load Balancing**
   - AWS Global Accelerator / Cloud Load Balancing
   - Health-check based failover
   - Anycast IP addresses

**Deliverables:**
- 5-region deployment
- < 100ms latency worldwide
- 99.99% availability SLA

---

#### Milestone 5.2: Platform as a Service (PaaS)
**Priority:** STRATEGIC | **Effort:** Very High | **Impact:** Transformational

**Tasks:**
1. **Self-Service Tenant Provisioning**
   - Automated onboarding flow
   - Per-tenant namespace isolation
   - Resource quota enforcement

2. **Multi-Tenancy Enhancements**
   - Physical isolation option (dedicated clusters)
   - Tenant-level observability
   - Custom branding per tenant

3. **Marketplace / Plugin System**
   - Allow tenants to install integrations
   - Third-party developer ecosystem
   - Revenue sharing model

**Deliverables:**
- Self-service tenant portal
- 50+ integration plugins
- PaaS marketplace

---

## ðŸŽ¯ MILESTONE PRIORITIZATION MATRIX

| Milestone | Priority | Effort | Impact | Timeline | Dependencies |
|-----------|----------|--------|--------|----------|--------------|
| **1.1 Resource Hygiene** | ðŸ”´ HIGH | Medium | High | Month 1 | None |
| **1.2 Autoscaling** | ðŸ”´ HIGH | Medium | High | Month 1-2 | 1.1 |
| **1.3 Observability** | ðŸŸ¡ MEDIUM | Low | High | Month 2 | None |
| **2.1 Zero Trust Security** | ðŸ”´ HIGH | High | Critical | Month 2-3 | None |
| **2.2 Disaster Recovery** | ðŸ”´ HIGH | High | Critical | Month 3-4 | 2.1 |
| **2.3 Compliance** | ðŸŸ¡ MEDIUM | Medium | High | Month 3 | 2.1 |
| **3.1 Cost Optimization** | ðŸŸ¡ MEDIUM | Medium | High | Month 3-4 | 1.2 |
| **3.2 Performance** | ðŸŸ¡ MEDIUM | High | High | Month 4-5 | 3.1 |
| **3.3 Multi-Cloud Strategy** | ðŸŸ¡ MEDIUM | High | Strategic | Month 4-6 | None |
| **4.1 API Gateway** | ðŸ”´ HIGH | Medium | High | Month 5-6 | 2.1 |
| **4.2 Data Platform** | ðŸŸ¡ MEDIUM | High | Medium | Month 6-7 | 3.2 |
| **4.3 AI/ML Platform** | ðŸŸ¢ LOW | High | Strategic | Month 8+ | 4.2 |
| **5.1 Global Multi-Region** | ðŸŸ£ STRATEGIC | Very High | Critical | Month 9+ | 2.2, 3.3 |
| **5.2 PaaS** | ðŸŸ£ STRATEGIC | Very High | Transform | Month 12+ | 5.1 |

---

## ðŸ“‹ IMMEDIATE ACTION ITEMS (Next 30 Days)

### Week 1-2: Assessment & Planning
1. âœ… **Audit disabled resources** (this analysis complete)
2. â¬œ **Investigate failed environments** (dev, test, prod-us)
3. â¬œ **Interview team** on disabled resources (why kept?)
4. â¬œ **Document current pain points** (performance, reliability, cost)
5. â¬œ **Establish baseline metrics** (latency, error rate, cost per tenant)

### Week 3: Quick Wins
1. â¬œ **Enable health checks** (liveness + readiness) on 10 critical services
2. â¬œ **Delete obviously unused resources** (e.g., manoj-to-de-delete node pool)
3. â¬œ **Fix test environment** (FAILED status)
4. â¬œ **Create operational dashboard** (service health, queue depths)
5. â¬œ **Document architecture** (this diagram, share with team)

### Week 4: Foundation for Phase 1
1. â¬œ **Define autoscaling targets** (min/max replicas per service)
2. â¬œ **Create HPA manifests** for top 10 services
3. â¬œ **Configure KEDA** for SQS-driven job services
4. â¬œ **Plan node pool consolidation** (14 â†’ 3)
5. â¬œ **Schedule Phase 1 kickoff meeting**

---

## ðŸŽ¯ SUCCESS METRICS (KPIs to Track)

### Reliability
- **Target:** 99.9% uptime for critical services
- **Measure:** SLI tracking via Grafana
- **Current:** Unknown (no SLOs defined)

### Performance
- **Target:** p95 API latency < 200ms
- **Measure:** Distributed tracing (OpenTelemetry)
- **Current:** Unknown (no tracing)

### Cost Efficiency
- **Target:** 25% cost reduction in 6 months
- **Measure:** AWS Cost Explorer, per-service tagging
- **Current:** Baseline needed

### Security Posture
- **Target:** Zero critical vulnerabilities
- **Measure:** AWS Inspector scans
- **Current:** Unknown (no scanning)

### Developer Productivity
- **Target:** < 15min from commit to production
- **Measure:** GitOps deployment time
- **Current:** Unknown (need CI/CD metrics)

### Scalability
- **Target:** Support 10x tenant growth without architecture changes
- **Measure:** Load testing results
- **Current:** Fixed scaling, cannot handle 10x

---

## ðŸ’¡ STRATEGIC RECOMMENDATIONS

### 1. **Consolidate Before You Expand**
- Clean up 49 disabled resources before adding new capabilities
- Fix failed environments before multi-region expansion

### 2. **Security is Non-Negotiable**
- Implement Zero Trust (Milestone 2.1) before external integrations
- Least privilege IAM should be top priority

### 3. **Multi-Cloud: Decide the Strategy**
```
Option A: AWS-Primary with GCP Backup
â””â”€ Use GCP only for disaster recovery

Option B: Active-Active Multi-Cloud
â””â”€ Equal production workloads on AWS + GCP

Option C: Migrate to Cloud-Agnostic (Kubernetes-Native)
â””â”€ Use managed Kubernetes, avoid cloud-specific services

Recommendation: Start with Option A, evaluate Option B after 6 months
```

### 4. **Don't Build What You Can Buy**
- Consider **Dagster Cloud** instead of self-managing
- Evaluate **Auth0/Okta** instead of building auth (onyx-authentication-api)
- Use **AWS App Runner** for simple APIs instead of full Kubernetes

### 5. **Data Strategy First**
- OneLens is fundamentally a data platform
- Invest heavily in Milestones 4.2 (Data Platform) and 4.3 (AI/ML)
- Consider **Snowflake** or **Databricks** for analytics layer

### 6. **Developer Experience Matters**
- Implement **GitOps fully** (currently enabled but unclear usage)
- Build **self-service tools** for common tasks
- Create **staging environments** (currently only dev/test/prod)

---

## ðŸ CONCLUSION

OneLens has a **solid microservices foundation** with **56 services, 25 DynamoDB tables, and multi-cloud presence**. However, the architecture shows signs of **rapid growth without consolidation**:

**Strengths:**
- âœ… Domain-driven microservices design
- âœ… Event-driven architecture (SQS/SNS/EventBridge)
- âœ… Comprehensive observability (Prometheus/Loki/Grafana)
- âœ… Multi-cloud capability (AWS + GCP)
- âœ… GitOps-enabled deployments

**Weaknesses:**
- âŒ 49 disabled resources (configuration sprawl)
- âŒ No autoscaling (fixed replicas)
- âŒ Shared IAM roles (security risk)
- âŒ Missing health checks
- âŒ 3 failed environments
- âŒ No API Gateway (direct ALB exposure)

**Critical Path:**
1. **Stabilize** (Phase 1): Clean up, enable autoscaling, add health checks
2. **Secure** (Phase 2): Zero Trust, DR, compliance
3. **Optimize** (Phase 3): Cost reduction, performance tuning
4. **Modernize** (Phase 4): API Gateway, Data Platform, AI/ML
5. **Scale** (Phase 5): Global multi-region, PaaS

**Estimated Timeline:** 12-18 months to world-class platform

**Next Step:** Execute **Immediate Action Items** (30-day plan) and begin **Phase 1 Milestone 1.1** (Resource Hygiene).

---

**Generated:** 2025-12-16
**Project:** onelens-4786099461
**Analysis by:** Praxis (Facets AI Agent)
